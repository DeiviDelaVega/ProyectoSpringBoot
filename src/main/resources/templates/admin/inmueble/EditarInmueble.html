<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
<meta charset="UTF-8">
<title>Actualizar Inmueble</title>

<!-- CSS only -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<!-- CSS personalizado -->
<link rel="stylesheet" th:href="@{/css/MantInmueble.css}">

</head>
<body>
	<nav th:replace="admin/HeaderNavAdministrador :: nav"></nav>
	<br>
	<h2 class="text-center">ACTUALIZAR INMUEBLE CON ID <span th:text="${inmueble.id}"></span></h2>
	<div class="container mt-4">
	    <div class="form-horizontal">
	        <h4 class="text-center">Modificar información registrada</h4>
	        <hr />
	        <form th:action="@{/admin/inmueble/inmuebles/{id}(id=${inmueble.id})}" th:object="${inmueble}" method="post" enctype="multipart/form-data">
				<br>
	            <div class="form-row">
	                <div class="form-group col-md-6">
	                    <label><strong class="label.strong">Nombre</strong></label>
	                    <input type="text" th:field="*{nombre}" class="form-control" placeholder="Nombre del inmueble" required>
	                </div>
	                <div class="form-group col-md-6">
	                    <label><strong class="label.strong">Capacidad</strong></label>
	                    <input type="number" th:field="*{capacidad}" class="form-control" placeholder="Capacidad del inmueble" required>
	                </div>
	            </div>
	
	            <div class="form-row">
	                <div class="form-group col-md-6">
	                    <label><strong class="label.strong">Número de Habitaciones</strong></label>
	                    <input type="number" th:field="*{numeroHabitaciones}" class="form-control" placeholder="Número de habitaciones" required>
	                </div>
	                <div class="form-group col-md-6">
	                    <label><strong class="label.strong">Precio por Noche</strong></label>
	                    <input type="number" step="0.01" th:field="*{precioPorNoche}" class="form-control" placeholder="Precio por noche" required>
	                </div>
	            </div>
	
	            <div class="form-group">
	                <label><strong class="label.strong">Descripción</strong></label>
	                <textarea th:field="*{descripcion}" class="form-control1" rows="3" placeholder="Descripción del inmueble"></textarea>
	            </div>
	
	            <div class="form-row">
	            	<div class="form-group col-md-6">
		                <label><strong class="label.strong">Servicios Incluidos</strong></label>
		                <input type="text" th:field="*{serviciosIncluidos}" class="form-control" placeholder="Servicios incluidos">
		            </div>
	                <div class="form-group col-md-6">
	                    <label><strong class="label.strong">Disponibilidad</strong></label>
	                    <select th:field="*{disponibilidad}" class="form-control" required>
	                        <option value="Si" th:selected="${inmueble.disponibilidad == 'Si'}">Si</option>
	                        <option value="No" th:selected="${inmueble.disponibilidad == 'No'}">No</option>
	                    </select>
	                </div>
	            </div>
	            
                <div class="form-group col-md-12 text-center">
				    <label><strong>Imagen Habitación</strong></label>
				
				    <!-- Vista previa de la imagen actual -->
				    <div th:if="${inmueble.imagenHabitacion != null}">
				        <img th:src="${inmueble.imagenHabitacion}" alt="Imagen actual" class="img-fluid mb-3 mt-2" style="max-height:400px; border-radius:10px;">
				        <p><strong>Archivo actual:</strong> 
				            <span id="nombre-actual"
				                th:text="${#strings.substring(inmueble.imagenHabitacion, inmueble.imagenHabitacion.lastIndexOf('/') + 1)}">
				            </span>
				        </p>
				    </div>
				
				    <!-- Input de archivo -->
					<div style="display: flex; justify-content: center; align-items: center; height: 100px;">
					    <input type="file" name="file" class="form-control" id="input-imagen" onchange="mostrarNombreArchivo(event)">
					</div>
					
				    <!-- Mostrar nombre seleccionado -->
				    <p id="nombre-nuevo" style="margin-top: 5px; color: green;"></p>
				</div>

				<script>
				    function mostrarNombreArchivo(event) {
				        const input = event.target;
				        const nombreArchivo = input.files[0]?.name;
				        const spanNombreActual = document.getElementById('nombre-actual');
				        const pNombreNuevo = document.getElementById('nombre-nuevo');
				
				        if (nombreArchivo) {
				            pNombreNuevo.textContent = "Nuevo archivo seleccionado: " + nombreArchivo;
				            if (spanNombreActual) spanNombreActual.style.textDecoration = "line-through";
				        } else {
				            pNombreNuevo.textContent = "";
				            if (spanNombreActual) spanNombreActual.style.textDecoration = "none";
				        }
				    }
				</script>
	
	            <div class="button-group-container mt-4">
	                <button type="submit" class="btn btn-dark">Guardar</button>
	                <a class="btn btn-secondary button-spacer" th:href="@{/admin/inmueble/inmuebles}">Volver</a>
	            </div>
	        </form>
	    </div>
	</div>
</body>
</html>