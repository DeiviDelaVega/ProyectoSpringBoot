<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Ver Inmueble - VISTA CLIENTE</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/CatalogoInmueble.css}" />
</head>

<body>
	<nav th:replace="cliente/HeaderNavCliente :: nav"></nav>
	<br>
	<div class="list-clientes-container container py-4">
		<!-- TÍTULO -->
		<h3 class="text-center my-4">Inmuebles Disponibles</h3>

		<!-- FILTROS COMPLETOS -->
		<form th:action="@{/cliente/catalogo/verInmueble}" method="get" class="filtro-container">

			<!-- FILTRO DE BÚSQUEDA -->
			<div class="row mb-3 justify-content-center">
				<div class="col-md-10">
					<div class="input-group">
						<input type="text" class="form-control" name="filtro" th:value="${filtro}"
							placeholder="Ingrese el nombre del inmueble...">
						<button type="submit" class="btn btn-dark" title="Buscar">
							<i class="fa-solid fa-magnifying-glass"></i>
						</button>
						<button id="toggleFiltrosBtn" class="btn btn-outline-secondary" type="button"
							onclick="toggleFiltros()" title="Mostrar filtros">
							<i class="fa fa-sliders-h me-2"></i> Filtros
						</button>
					</div>
				</div>
			</div>



			<!-- FILTROS DETALLADOS -->
			<div class="container filters-container" id="filtrosForm" style="display: none;">
				<div class="row">
					<div class="col-md-3 mb-3">
						<label class="form-label">Precio desde:</label>
						<input type="number" class="form-control" name="precioDesde" th:value="${precioDesde}"
							placeholder="S/.">
					</div>
					<div class="col-md-3 mb-3">
						<label class="form-label">Precio hasta:</label>
						<input type="number" class="form-control" name="precioHasta" th:value="${precioHasta}"
							placeholder="S/.">
					</div>
					<div class="col-md-3 mb-3">
						<label class="form-label">Fecha registrada desde:</label>
						<input type="date" class="form-control" name="fechaDesde" th:value="${fechaDesde}">
					</div>
					<div class="col-md-3 mb-3">
						<label class="form-label">Fecha registrada hasta:</label>
						<input type="date" class="form-control" name="fechaHasta" th:value="${fechaHasta}">
					</div>
					<div class="col-md-3 mb-3">
						<label class="form-label">Estado:</label>
						<select class="form-select" name="estado">
							<option value="" th:selected="${estado == ''}">-- Seleccionar --</option>
							<option value="Si" th:selected="${estado == 'Si'}">Disponible</option>
							<option value="No" th:selected="${estado == 'No'}">Ocupado</option>
						</select>
					</div>
				</div>

				<!-- BOTONES FILTROS -->
				<div class="d-flex justify-content-end mt-2">
					<button type="submit" class="btn btn-dark me-2">Buscar</button>
					<a th:href="@{/cliente/catalogo/verInmueble}" class="btn btn-secondary">Limpiar</a>
				</div>
			</div>
			<br>
			
		</form>

		<div th:if="${alerta}" class="alert alert-warning text-center" role="alert">
			<span th:text="${alerta}"></span>
		</div>

		<br>

		<!-- LISTADO DE INMUEBLES -->
		<div class="container mt-4 mb-5">
			<div th:each="inmueble : ${inmuebles}" class="card mb-3 shadow-sm">
				<div class="row g-0">
					<div class="col-md-4">
						<img th:src="${inmueble.imagenHabitacion}" alt="Imagen del inmueble" class="img-inmueble" />
					</div>
					<div class="col-md-8">
						<div class="card-body d-flex flex-column justify-content-between h-100">
							<div>
								<h5 class="card-title mb-1">
									Monterrico Polo Aparts - <strong th:text="${inmueble.nombre}">Nombre</strong>
								</h5>
								<p class="card-text mb-2">Descripción: <span
										th:text="${inmueble.descripcion}">Descripción</span></p>
								<p class="card-text mb-2">Servicios: <span
										th:text="${inmueble.serviciosIncluidos}">Servicios</span></p>
								<p class="card-text mb-1">Capacidad: <span th:text="${inmueble.capacidad}">0</span>
									personas
								</p>
								<p class="card-text mb-1">Habitaciones: <span
										th:text="${inmueble.numeroHabitaciones}">0</span></p>
								<p class="card-text mb-1">
									<strong>Disponibilidad:</strong>
									<span th:text="${inmueble.disponibilidad}"
										th:classappend="${inmueble.disponibilidad == 'Si'} ? 'text-success' : 'text-danger'">Disponibilidad</span>
								</p>
							</div>
							<div class="text-end">
								<h5 class="text-primary"
									th:text="'S/ ' + ${#numbers.formatDecimal(inmueble.precioPorNoche, 1, 2)}">Precio
								</h5>
								<button class="btn btn-dark">Ver</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<nav th:replace="Paginacion :: paginator"></nav>

	</div>
	<!-- SCRIPTS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		function toggleFiltros() {
			const filtros = document.getElementById('filtrosForm');
			const boton = document.getElementById('toggleFiltrosBtn');

			if (filtros.style.display === 'none') {
				filtros.style.display = 'block';
				boton.textContent = 'Ocultar Filtros';
			} else {
				filtros.style.display = 'none';
				boton.innerHTML = '<i class="fa fa-sliders-h me-2"></i> Filtros';
			}
		}
	</script>
</body>

</html>